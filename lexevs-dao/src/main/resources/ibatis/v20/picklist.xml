<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL MAP 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="PickList">

	<typeAlias alias="pickListDefinition" type="org.LexGrid.valueSets.PickListDefinition" />

	<resultMap id="pickListDefinitionResult" class="pickListDefinition">
		<result property="pickListId" column="pickListId" />
		<result property="representsValueSetDefinition" column="representsValueSetDefinition" />
		<result property="defaultEntityCodeNamespace" column="defaultEntityCodeNamespace" />
		<result property="defaultLanguage" column="defaultLanguage" />
		<result property="defaultSortOrder" column="defaultSortOrder"/>
		<result property="completeSet" column="completeSet"/>
		<result property="entityDescription.content" column="description" />
		<result property="isActive" column="isActive" />
		<result property="owner" column="owner" />
		<result property="status" column="status" />
		<result property="effectiveDate" column="effectiveDate" />
		<result property="expirationDate" column="expirationDate" />
		<result property="entryState" resultMap="Versions.entryStateResult" />
		<result property="_sourceList" resultMap="PickListDefinition.sourceResult"/>
	</resultMap>
	
	<select id="getPickListIds" 
		parameterClass="string" resultClass="string">
		SELECT
			pickListId
		FROM
			vsPickList
	</select>
	
	<select id="getPickListGuidByPickListId" 
		parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter" 
		resultClass="string">
		SELECT
			vsPickListGuid
		FROM
			vsPickList pickListDef
		WHERE
			pickListDef.pickListId = #param1#
	</select>
	
	<select id="getPickListDefinitionByPickListId" 
		resultMap="pickListDefinitionResult" 
		parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter">
		SELECT
			pickListDef.pickListId,
			pickListDef.representsValueSetDefinition,
			pickListDef.defaultEntityCodeNamespace,
			pickListDef.defaultLanguage,
			pickListDef.defaultSortOrder,
			pickListDef.completeSet
		FROM
			vsPickList pickListDef
		WHERE
			pickListDef.pickListId = #param1#
	</select>
	
	<select id="getPickListDefinitionIdForValueSet" 
		resultMap="pickListDefinitionResult" 
		parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter">
		SELECT
			pickListDef.pickListId,
			pickListDef.representsValueSetDefinition,
			pickListDef.defaultEntityCodeNamespace,
			pickListDef.defaultLanguage,
			pickListDef.defaultSortOrder,
			pickListDef.completeSet
		FROM
			vsPickList pickListDef
		WHERE
			pickListDef.pickListId = #param1#
	</select>
	
	<insert id="insertPickListDefinition" 
		parameterClass="org.lexevs.dao.database.ibatis.picklist.parameter.InsertPickListDefinitionBean">
		INSERT INTO vsPickList
		(
				vsPickListGuid,
				pickListId,
				representsValueSetDefinition,
				completeSet,
				defaultEntityCodeNamespace,
				defaultLanguage,
				defaultSortOrder,
				description,
				releaseGuid,
				isActive,
				owner,
				status,
				effectiveDate,
				expirationDate,
				entryStateGuid
			) VALUES (
				#id#,
				#pickListDefinition.pickListId#,
				#pickListDefinition.representsValueSetDefinition#,
				#pickListDefinition.completeSet#,
				#pickListDefinition.defaultEntityCodeNamespace#,
				#pickListDefinition.defaultLanguage#,
				#pickListDefinition.defaultSortOrder#,
				#pickListDefinition.entityDescription.content#,
				#systemReleaseId#,
				#pickListDefinition.isActive#,
				#pickListDefinition.owner#,
				#pickListDefinition.status#,
				#pickListDefinition.effectiveDate#,
				#pickListDefinition.expirationDate#,
				#entryStateId#	
			)
     </insert>

	
    
</sqlMap>