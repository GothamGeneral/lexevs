<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL MAP 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="Association">
	
     <insert id="insertRelations" parameterClass="org.lexevs.dao.database.ibatis.association.parameter.InsertRelationsBean">
		INSERT INTO $prefix$relation (
			relationGuid,
			codingSchemeGuid,
			containerName,
			isMapping,
			sourceCodingScheme,
			sourceCodingSchemeVersion,
			targetCodingScheme,
			targetCodingSchemeVersion,
			description,
			isActive,
			owner,
			status,
			effectiveDate,
			expirationDate,
			entryStateGuid
		) VALUES (
			#id#, 
			#codingSchemeId#,
			#relations.containerName#, 
			null, 
			null, 
			null, 
			null, 
			null, 
			#relations.entityDescription.content#,
			null,
			null,
			null,
			null,
			null,
			#entryStateId#
		)
  </insert>
  
   <insert id="insertAssociationPredicate" parameterClass="org.lexevs.dao.database.ibatis.association.parameter.InsertAssociationPredicateBean">
   		INSERT INTO $prefix$associationPredicate (
   			associationPredicateGuid,
   			relationGuid,
   			associationEntityGuid,
   			associationName
   		) VALUES (
   			#id#,
   			#relationId#,
   			null,
   			#associationPredicate.associationName#
   		)
   </insert>
   
   <select id="getAssociationPredicateKey" remapResults="true"
   	parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameterTuple" resultClass="string">
   		SELECT
   			associationPredicateGuid
   		FROM
   			$prefix$associationPredicate
		WHERE
			relationGuid = 
			#param1#
		AND
			associationName = 
			#param2#
   			
   </select>
   
  	<select id="getAssociationPredicateKeysForRelationsId" remapResults="true"
  		parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter" resultClass="string">
   		SELECT
   			associationPredicateGuid
   		FROM
   			$prefix$associationPredicate
		WHERE
			relationGuid = 
			#param1#
   </select>
   
   <select id="getAssociationEntityIdForAssociationPredicateName" remapResults="true"
   		parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter" resultClass="string">
   		SELECT
   			associationEntityGuid
   		FROM
   			$prefix$associationPredicate
		WHERE
			associationPredicateGuid = 
			#param1#
   </select>
   
    <select id="getRelationsKey" 
    	remapResults="true" parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameterTuple" resultClass="string">
   		SELECT
   			relationGuid
   		FROM
   			$prefix$relation
		WHERE
			codingSchemeGuid = 
			#param1#
		AND
			containerName = 
			#param2#		
   </select>
   
    <select id="getRelationsKeysForCodingSchemeId" remapResults="true"
    	parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter" resultClass="string">
   		SELECT
   			relationGuid
   		FROM
   			$prefix$relation
		WHERE
			codingSchemeGuid = 
			#param1#	
   </select>
   
   <select id="getAssociationPredicateNameForId" remapResults="true"
   	parameterClass="org.lexevs.dao.database.ibatis.parameter.PrefixedParameter" resultClass="string">
   		SELECT
   			associationName
   		FROM
   			$prefix$associationPredicate
   		WHERE
			associationPredicateGuid = 
			#param1#
   </select> 
</sqlMap>